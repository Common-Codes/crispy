<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="Login | Crispy - Open Source Chat">
  <meta name="keywords" content="online, chat, app, open-source. crispy">
  <meta property="og:site_name" content="App | Crispy">
  <link rel="icon" href="https://ggpht.ga/icons/crispy.png" type="image/png">
  <meta property="og:title" content="App | Crispy">
  <meta property="og:image" content="https://ggpht.ga/icons/crispy.png">
  <meta property="og:description" content="Login | Crispy - Open Source Chat">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="icon" type="image/x-icon" href="https://tallerthanshort.github.io/ut3.ggpht/icons/crispy.png">
  <title>Crispy | App</title>
  <link rel="stylesheet" href="styles.css">
  <script src="profiles.js" defer></script>
</head>
<body class="grey lighten-1">

  <nav class="z-depth-0 grey lighten-2">
    <div class="nav-wrapper container">
      <a href="#" class="brand-logo left">
        <h5 style="color: black;">Crispy Chat</h5>
      </a>
      <ul id="nav-mobile" class="right hide-on-med">
          <li class="logged-in" style="display: none;">
            <a href="#" class="grey-text modal-trigger" data-target="modal-account">Account</a>
          </li>
          <li class="logged-in" style="display: none;">
            <a href="#" class="grey-text" id="logout">Logout</a>
          </li>
          <li class="logged-out" style="display: none;">
            <a href="#" class="grey-text modal-trigger" data-target="modal-login">Login</a>
          </li>
          <li class="logged-out" style="display: none;">
            <a href="#" class="grey-text modal-trigger" data-target="modal-signup">Sign up</a>
          </li>
          <li class="logged-in" style="display: none;">
            <a href="#" class="grey-text modal-trigger" data-target="modal-create">New Guild</a>
          </li>
        </span>
      </ul>
    </div>
  </nav>

  <div id="navbar" class="left hide-on-med" style="display: flex;">
    <ul id="guild-nav" class="left hide-on-med" style="list-style-type: none; margin: 0; padding: 0; width: 51px; background-color: #f1f1f1;">
        <li class="eggz" style="display: none;">eggz</li>
    </ul>
  </div>

  <div id="modal-signup" class="modal">
    <div class="modal-content">
      <h4>Sign up</h4><br />
      <form id="signup-form">
        <div class="input-field">
          <input type="email" id="signup-email" required />
          <label for="signup-email">Email</label>
        </div>
        <div class="input-field">
          <input type="text" id="signup-name" maxlength="15" required />
          <label for="signup-name">Username</label>
        </div>
        <div class="input-field">
          <input type="password" id="signup-password" required />
          <label for="signup-password">Password</label>
        </div>
        <div class="modal-content">
          <p style="color: red;">By continuing, you agree to our <span style="text-decoration: underline;  cursor: pointer;" onclick="location.href = 'https://github.com/Common-Codes/crispy/blob/main/legal/Terms%20of%20Service.md';">Terms of Service</span> and <span style="text-decoration: underline; cursor: pointer;" onclick="location.href = 'https://github.com/Common-Codes/crispy/blob/main/legal/Privacy%20Policy.md';">Privacy Policy</span>.</p>
        </div>
        <button class="btn yellow darken-2 z-depth-0">Sign up</button>
      </form>
    </div>
  </div>

  <div id="modal-login" class="modal">
    <div class="modal-content">
      <h4>Login</h4><br />
      <p id="errtext"> </p>
      <form id="login-form">
        <div class="input-field">
          <input type="email" id="login-email" required />
          <label for="login-email">Email</label>
        </div>
        <div class="input-field">
          <input type="password" id="login-password" required />
          <label for="login-password">Your password</label>
        </div>
        <div class="modal-content">
          <p style="color: red;">By continuing using our platform, you agree to our <span style="text-decoration: underline;  cursor: pointer;" onclick="location.href = 'https://github.com/Common-Codes/crispy/blob/main/legal/Terms%20of%20Service.md';">Terms of Service</span> and <span style="text-decoration: underline; cursor: pointer;" onclick="location.href = 'https://github.com/Common-Codes/crispy/blob/main/legal/Privacy%20Policy.md';">Privacy Policy</span>.</p>
        </div>
        <button class="btn yellow darken-2 z-depth-0">Login</button>
      </form>
    </div>
  </div>

  <div id="modal-reauth" class="modal">
    <div class="modal-content">
      <h4>Re-Authorise Access to your Account</h4><br />
      <p id="rerrtext">Let's verify it's you before attempting to delete your account</p>
      <form id="reauth-form">
        <div class="input-field">
          <input type="password" id="reauth-password" required />
          <label for="login-password">Your password</label>
        </div>
        <div class="modal-content">
          <p style="color: red;">By continuing, you're agreeing to our <span style="text-decoration: underline;  cursor: pointer;" onclick="location.href = 'https://github.com/Common-Codes/crispy/blob/main/legal/Terms%20of%20Service.md';">Terms of Service</span> and <span style="text-decoration: underline; cursor: pointer;" onclick="location.href = 'https://github.com/Common-Codes/crispy/blob/main/legal/Privacy%20Policy.md';">Privacy Policy</span>.<br><br>By deleting your account, you agree that we cannot in any way restore your data. Your email, hashed password and profile (including profile image, badges, etc) will be deleted permanently. Your messages will stay visible under your previous account username with server-cached profile image.</p>
        </div>
        <button class="btn btn-primary z-depth-0">Authenticate</button>
      </form>
    </div>
  </div>

  <div id="modal-account" class="modal">
    <div class="modal-content center-align">
      <h4>Account details</h4><br />
      <div class="account-badges">
        <div class="_category_sso5v_101">Badges</div>
        <div class="modal-content UserBadges__BadgesBase-sc-1ubexy3-0 gMJfVq" id="badge-location" style="display: flex;"></div>
      </div>
      <div class="account-details"></div>
      <hr>
      <div id="delete-account">
        <p style="margin-top: -4px; color: blue;">BETA</p>
        <h4 style="color: crimson;">!! DANGER ZONE !!</h4>
        <button type="button" onclick="reAuthenticate()" class="btn btn-primary">Delete Account</button>
        <h4 id="errlog" style="color:crimson"> </h4>
      </div>
    </div>
  </div>

  <div id="modal-extaccount" class="modal">
    <div class="modal-content center-align">
      <h4>User's details</h4>
      <p style="margin-top: -4px; color: blue;">BETA</p><br />
      <div class="ext-account-badges">
        <div class="_category_sso5v_101">User's Badges</div>
        <div class="modal-content UserBadges__BadgesBase-sc-1ubexy3-0 gMJfVq" id="ext-badge-location" style="display: flex;"></div>
      </div>
      <div class="ext-account-details"></div>
    </div>
  </div>

  <div id="modal-create" class="modal">
    <div class="modal-content">
      <h4>Create Guild</h4>
      <b style="margin-top: -4px; color: blue;">BETA</b><br />
      <form id="create-form">
        <div class="input-field">
          <input type="text" id="title" required>
          <label for="title">Guild Title</label>
        </div>
        <div class="input-field">
          <textarea id="content" class="materialize-textarea" required></textarea>
          <label for="content">Guild Icon (url)</label>
        </div>
        <button class="btn yellow darken-2 z-depth-0">Create</button>
      </form>
    </div>
  </div>

  <div id="guild-current">
    <h4 id="guild-title-display" style="color: #151515"></h4>
  </div>

  <div id="chat_container">
    <div id="chat_inner_container">
      <div id="chat_content_container"></div>
    </div>
  </div>

  <div class="menu">
    <ul class="menu-options">
      <li class="menu-option" id="copyInvite">Copy Invite!</li>
      <li class="menu-option" onclick="location.reload()">Reload</li>
      <li class="menu-option">Spy</li>
    </ul>
  </div>

  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-database.js"></script>
  <script>
    var firebaseConfig = {
//reads, writes and OAuth Scopes are restricted to the URL of https://common-codes.github.io/ and only users that are signed-in can read and write data to firebase.auth().currentUser
      apiKey: "AIzaSyAMo9JcJdFEsXlKh3bHc5H-hX8fq41vIaU",
      authDomain: "crispy-chat.firebaseapp.com",
      databaseURL: "https://crispy-chat-default-rtdb.firebaseio.com",
      projectId: "crispy-chat",
      storageBucket: "crispy-chat.appspot.com"
    };
    firebase.initializeApp(firebaseConfig);

    const auth = firebase.auth();
    const store = firebase.firestore();
    const db = firebase.database();
    
    // Don't ask, site won't work without it...
    store.settings({ timestampsInSnapshots: true });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="auth.js"></script>
  <script src="index.js"></script>
  <script src="mobile.js" defer></script>
  <script src="message.js" defer></script>
</body>
</html>
